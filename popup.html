<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>World Clock</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- Header with controls -->
    <header>
      <div class="header-content">
        <h1>üåè World Clock</h1>
        <div class="header-controls">
          <button class="icon-btn" id="refresh-btn" title="Refresh (R)" aria-label="Refresh clocks">
            <span>üîÑ</span>
          </button>
          <button class="icon-btn" id="settings-btn" title="Settings (S)" aria-label="Open settings">
            <span>‚öôÔ∏è</span>
          </button>
          <button class="icon-btn" id="dark-mode-btn" title="Toggle dark mode (D)" aria-label="Toggle dark mode">
            <span>üåô</span>
          </button>
          <button class="icon-btn" id="compact-mode-btn" title="Toggle compact mode (C)" aria-label="Toggle compact mode">
            <span>üìê</span>
          </button>
          <button class="icon-btn add-timezone-header-btn" id="add-timezone-btn" title="Add timezone" aria-label="Add timezone">
            <span>+</span>
          </button>
          <button class="icon-btn" id="converter-btn" title="Time Converter" aria-label="Time Converter">
            <span>üïê</span>
          </button>
          <button class="icon-btn" id="meeting-btn" title="Find Meeting Time" aria-label="Find Meeting Time">
            <span>üìÖ</span>
          </button>
          <button class="icon-btn" id="search-btn" title="Quick Search" aria-label="Quick Search">
            <span>üîç</span>
          </button>
          <button class="icon-btn" id="share-btn" title="Share View" aria-label="Share View">
            <span>üì§</span>
          </button>
        </div>
      </div>
      <div class="add-timezone-section">
        <button class="add-timezone-btn-large" id="add-timezone-btn-large">
          ‚ûï Add Timezone
        </button>
      </div>
      <div class="loading-indicator" id="loading-indicator"></div>
    </header>
    
    <!-- Settings Panel -->
    <div class="settings-panel" id="settings-panel">
      <div class="settings-content">
        <h3>Settings</h3>
        <div class="setting-item">
          <label>
            <input type="checkbox" id="toggle-24hour">
            <span>24-hour format</span>
          </label>
        </div>
        <div class="setting-item">
          <label>
            <input type="checkbox" id="toggle-seconds" checked>
            <span>Show seconds</span>
          </label>
        </div>
        <div class="setting-item">
          <label>
            <input type="checkbox" id="toggle-offset">
            <span>Show UTC offset</span>
          </label>
        </div>
        <div class="setting-item">
          <label>
            <input type="checkbox" id="toggle-difference">
            <span>Show time difference</span>
          </label>
        </div>
        <div class="setting-item">
          <label>
            <input type="checkbox" id="toggle-business-hours">
            <span>Show business hours indicator</span>
          </label>
        </div>
        <div class="setting-item">
          <label>
            <input type="checkbox" id="toggle-countdown">
            <span>Show countdown to next hour</span>
          </label>
        </div>
        <div class="setting-item">
          <label>
            <span>View Mode:</span>
            <select id="view-mode-select">
              <option value="grid">Grid</option>
              <option value="list">List</option>
              <option value="table">Table</option>
            </select>
          </label>
        </div>
        <div class="setting-item">
          <button class="btn-secondary" id="export-btn">Export Settings</button>
          <input type="file" id="import-input" accept=".json" style="display: none;">
          <button class="btn-secondary" id="import-btn">Import Settings</button>
        </div>
        <button class="close-settings" id="close-settings">Close</button>
      </div>
    </div>

    <!-- Add Timezone Panel -->
    <div class="timezone-panel" id="timezone-panel">
      <div class="timezone-panel-content">
        <h3>Add Timezone</h3>
        <div class="timezone-search">
          <input 
            type="text" 
            id="timezone-search-input" 
            placeholder="Search timezones (e.g., London, Tokyo, Sydney...)"
            autocomplete="off"
          />
          <div class="timezone-results" id="timezone-results"></div>
        </div>
        <button class="close-timezone-panel" id="close-timezone-panel">Close</button>
      </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>
    
    <!-- Clock Grid -->
    <div class="clock-grid" id="clock-grid">
      <div class="clock-card est" data-timezone="est" title="Click to copy time">
        <div class="day-night-indicator" id="est-indicator"></div>
        <div class="flag-icon">üá∫üá∏</div>
        <div class="timezone-name">Eastern Time</div>
        <div class="time-display" id="est-time">--:--:--</div>
        <div class="date-display" id="est-date">--</div>
        <div class="timezone-info">
          <div class="timezone-code">EST/EDT</div>
          <div class="timezone-offset" id="est-offset"></div>
          <div class="time-difference" id="est-difference"></div>
        </div>
      </div>
      
      <div class="clock-card pst" data-timezone="pst" title="Click to copy time">
        <div class="day-night-indicator" id="pst-indicator"></div>
        <div class="flag-icon">üá∫üá∏</div>
        <div class="timezone-name">Pacific Time</div>
        <div class="time-display" id="pst-time">--:--:--</div>
        <div class="date-display" id="pst-date">--</div>
        <div class="timezone-info">
          <div class="timezone-code">PST/PDT</div>
          <div class="timezone-offset" id="pst-offset"></div>
          <div class="time-difference" id="pst-difference"></div>
        </div>
      </div>
      
      <div class="clock-card brazil" data-timezone="brazil" title="Click to copy time">
        <div class="day-night-indicator" id="brazil-indicator"></div>
        <div class="flag-icon">üáßüá∑</div>
        <div class="timezone-name">Brazil</div>
        <div class="time-display" id="brazil-time">--:--:--</div>
        <div class="date-display" id="brazil-date">--</div>
        <div class="timezone-info">
          <div class="timezone-code">BRT</div>
          <div class="timezone-offset" id="brazil-offset"></div>
          <div class="time-difference" id="brazil-difference"></div>
        </div>
      </div>
      
      <div class="clock-card italy" data-timezone="italy" title="Click to copy time">
        <div class="day-night-indicator" id="italy-indicator"></div>
        <div class="flag-icon">üáÆüáπ</div>
        <div class="timezone-name">Italy</div>
        <div class="time-display" id="italy-time">--:--:--</div>
        <div class="date-display" id="italy-date">--</div>
        <div class="timezone-info">
          <div class="timezone-code">CET/CEST</div>
          <div class="timezone-offset" id="italy-offset"></div>
          <div class="time-difference" id="italy-difference"></div>
        </div>
      </div>
    </div>

    <!-- Time Converter Panel -->
    <div class="converter-panel" id="converter-panel">
      <div class="converter-content">
        <h3>Time Converter</h3>
        <div class="converter-input">
          <label>Time:</label>
          <input type="time" id="converter-time-input" required>
        </div>
        <div class="converter-input">
          <label>From Timezone:</label>
          <select id="converter-from-tz"></select>
        </div>
        <button class="btn-primary" id="convert-time-btn">Convert</button>
        <div class="converter-results" id="converter-results"></div>
        <button class="close-converter" id="close-converter">Close</button>
      </div>
    </div>

    <!-- Meeting Finder Panel -->
    <div class="meeting-panel" id="meeting-panel">
      <div class="meeting-content">
        <h3>Find Meeting Time</h3>
        <div class="meeting-timezones" id="meeting-timezones"></div>
        <button class="btn-primary" id="find-meeting-btn">Find Best Times</button>
        <div class="meeting-results" id="meeting-results"></div>
        <button class="close-meeting" id="close-meeting">Close</button>
      </div>
    </div>

    <!-- Quick Search Panel -->
    <div class="quick-search-panel" id="quick-search-panel">
      <div class="quick-search-content">
        <h3>Quick Time Search</h3>
        <input type="text" id="quick-search-input" placeholder="Search timezone (e.g., Tokyo, London...)">
        <div class="quick-search-results" id="quick-search-results"></div>
        <button class="close-quick-search" id="close-quick-search">Close</button>
      </div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu" id="context-menu">
      <div class="context-menu-item" data-action="copy-time">Copy Time</div>
      <div class="context-menu-item" data-action="copy-date">Copy Date</div>
      <div class="context-menu-item" data-action="copy-all">Copy All</div>
      <div class="context-menu-item" data-action="add-calendar">Add to Calendar</div>
      <div class="context-menu-item" data-action="edit-label">Edit Label</div>
      <div class="context-menu-item" data-action="add-note">Add Note</div>
      <div class="context-menu-item" data-action="remove">Remove</div>
    </div>

    <!-- Keyboard Shortcuts Help -->
    <div class="shortcuts-help" id="shortcuts-help">
      <div class="shortcuts-content">
        <h4>Keyboard Shortcuts</h4>
        <div class="shortcut-item"><kbd>R</kbd> - Refresh</div>
        <div class="shortcut-item"><kbd>1-4</kbd> - Copy timezone 1-4</div>
        <div class="shortcut-item"><kbd>S</kbd> - Settings</div>
        <div class="shortcut-item"><kbd>D</kbd> - Dark mode</div>
        <div class="shortcut-item"><kbd>C</kbd> - Compact mode</div>
        <div class="shortcut-item"><kbd>?</kbd> - Toggle this help</div>
        <div class="shortcut-item"><kbd>Esc</kbd> - Close</div>
        <button class="close-shortcuts" id="close-shortcuts">Close</button>
      </div>
    </div>
  </div>
  
  <script src="popup.js"></script>
</body>
</html>
